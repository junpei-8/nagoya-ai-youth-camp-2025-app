<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>お宝探索ダンジョン - Map 1</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div id="container"></div>
    <button id="startButton">実行</button>
    <div id="treasureOverlay">💰</div>

    <script src="https://unpkg.com/three@0.155.0/build/three.min.js"></script>
    <script src="../ai-service.js"></script>
    <script src="../core.js"></script>
    <script src="map.js"></script>
    <script>
        if (window.mapConfig) {
            initScene(window.mapConfig);
            createMapObjects(window.mapConfig);
            if (renderer && scene && camera) { // レンダラー、シーン、カメラが初期化されていることを確認
                renderer.render(scene, camera); // 初期レンダリング
            } else {
                console.error("レンダラー、シーン、またはカメラが初期レンダリング呼び出し前に初期化されていません。");
            }

            document.getElementById('startButton').addEventListener('click', () => {
                startGame(window.mapConfig); // startGameは非同期ですが、ここではawait不要です
            });
        } else {
            console.error("mapConfig が定義されていません。map.js が正しく読み込まれ、window.mapConfig を定義しているか確認してください。");
            alert("mapConfig が見つかりません。map.js を確認してください。");
        }
    </script>
</body>
</html>
